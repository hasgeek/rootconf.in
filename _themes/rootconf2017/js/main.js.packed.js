function parseJson(t,e,s){var n=t.schedule,o=[],i=[],r=0,a=0;n.forEach(function(t,e,s){var n=[],c="";s[e].date=getDateString(t.date),s[e].tableid="table-"+e,t.slots.forEach(function(t,o,i){var r=t.sessions;o===0&&(s[e].start=getIST(getTimeString(t.sessions[0].start))),o===i.length-1&&(s[e].end=getIST(getTimeString(t.sessions[r.length-1].end))),r.forEach(function(t,i){t.section_name&&t.section_name.toLowerCase().indexOf("workshop")!==-1&&(s[e].type="workshop"),t.room&&n.indexOf(t.room)===-1&&n.push(t.room),s[e].slots[o].sessions[i].start=getIST(getTimeString(t.start)),s[e].slots[o].sessions[i].end=getIST(getTimeString(t.end)),(!c||getTotalMins(t.end)>getTotalMins(c))&&(c=t.end);var r=parseInt(getHrMin(t.start)[0]),a=parseInt(getHrMin(t.start)[1]),l=getdateObject(r,a),d=parseInt(getHrMin(t.end)[0]),f=parseInt(getHrMin(t.end)[1]),u=getdateObject(d,f);s[e].slots[o].sessions[i].duration=parseInt(Math.abs(u-l)/6e4)}),s[e].type!=="workshop"&&(s[e].type="conference")}),n.sort(),n.forEach(function(t,e,s){s[e]={name:t,title:getAudiTitle(t),shorttitle:getShortAudiTitle(t),track:e}}),s[e].rooms=n,t.slots.forEach(function(t,o){var i=t.sessions;i.forEach(function(t,i){t.room&&(s[e].slots[o].sessions[i].track=getTrack(t.room,n),s[e].slots[o].sessions[i].roomTitle=getAudiTitle(t.room))})}),s[e].type==="conference"?(i.push({date:s[e].date,tableid:s[e].tableid,rooms:s[e].rooms,start:s[e].start,end:c}),createTable(i[r]),r+=1):(o.push({date:s[e].date,rooms:s[e].rooms,start:s[e].start,end:c}),createTable(o[a]),a+=1)}),r=0,a=0,n.forEach(function(t){t.slots.forEach(function(t){t.sessions.length>1&&t.sessions.sort(function(t,e){return t.track-e.track})}),t.type==="conference"?(pushSessions(i[r],t.slots),addRowSpan(i[r]),checkColumns(i[r]),r+=1):(pushSessions(o[a],t.slots),addRowSpan(o[a]),checkColumns(o[a]),a+=1)}),e==="conference"?renderScheduleTable(i,"conference",s):renderScheduleTable(o,"workshop",s)}function parseProposalJson(t){new Ractive({el:"#funnel-proposals",template:"#proposals-wrapper",data:{proposals:t.proposals},complete:function(){$.each($(".proposal-card .title"),function(t,e){updateFontSize(e)}),enableScroll(t.proposals.length),$(window).resize(function(){enableScroll(t.proposals.length)}),$("#funnel-proposals .click, #funnel-proposals .btn").click(function(){var t=$(this).data("label"),e=$(this).data("target");Rootconf.sendGA("click",t,e)})}})}window.Rootconf={},Rootconf.sendGA=function(t,e,s){typeof ga!="undefined"&&ga("send",{hitType:"event",eventCategory:t,eventAction:e,eventLabel:s})},Rootconf.getQueryParams=function(){var t=window.location.search.split("?");return t.length>1?t[1].split("&"):[]},Rootconf.getTicketId=function(){return Rootconf.getQueryParams().map(function(t){var e=t.split("=");return e[0]==="ticket"?e[1]:void 0}).filter(function(t){return t!==void 0&&t!==""})};var getDateString=function(t){var e=parseInt(t.substr(0,4),10),s=parseInt(t.substr(5,2),10)-1,n=parseInt(t.substr(8,2),10),o=new Date;return o.setFullYear(e,s,n),o.toDateString()},getTimeString=function(t){return t.substr(t.indexOf("T")+1,5)},getHrMin=function(t){var e=t.substring(0,t.indexOf(":")),s=t.substring(t.indexOf(":")+1);return[e,s]},getdateObject=function(t,e){var s=new Date;return s.setHours(t),s.setMinutes(e),s},toTimeString=function(t){return(10>t.getHours()?"0":"")+t.getHours()+":"+((10>t.getMinutes()?"0":"")+t.getMinutes())},getIST=function(t){var e=parseInt(getHrMin(t)[0],10)+5,s=parseInt(getHrMin(t)[1],10)+30,n=getdateObject(e,s);return ist=toTimeString(n)},createTable=function(t){var e,s,n,o,i;e=getHrMin(t.start)[0],s=getHrMin(t.start)[1],n=getdateObject(e,s),e=getHrMin(t.end)[0],s=getHrMin(t.end)[1],o=getdateObject(e,s),t.slots=[];do i=toTimeString(n),t.slots.push({slot:i,issession:!1,sessions:[],occupied:"empty"}),n.setMinutes(n.getMinutes()+5);while(o>=n)},getTotalMins=function(t){var e=parseInt(getHrMin(t)[0],10),s=parseInt(getHrMin(t)[1],10);return e*60+s},getAudiTitle=function(t){return t.substring(t.indexOf("/")+1).replace(/-/g," ")+", "+t.substring(0,t.indexOf("/")).replace(/-/g," ")},getShortAudiTitle=function(t){return t.substring(t.indexOf("/")+1).replace(/-/g," ")},getTrack=function(t,e){var s;for(s=0;e.length>s;s++)if(e[s].name===t)return e[s].track},pushSessions=function(t,e){e.forEach(function(e){var s=e.sessions;s.forEach(function(e){var s=getTotalMins(e.start);getTotalMins(e.end),t.slots.forEach(function(t,n,o){getTotalMins(t.slot)===s&&(o[n].sessions.push(e),o[n].issession=!0)})})})},addRowSpan=function(t){t.slots.forEach(function(e,s,n){if(e.issession){(e.sessions[0].track===0||e.sessions[0].is_break)&&(e.occupied=0);var o=e.sessions;for(sessionindex=0;o.length>sessionindex;sessionindex++){var i=getTotalMins(o[sessionindex].end),r=s+1,a=1,c=!1;for(r=s+1;n.length>r;r++){if(n[r].issession===!0&&getTotalMins(n[r].sessions[0].start)>=i)break;n[r].issession===!0&&i>getTotalMins(n[r].sessions[0].start)&&(c=!0,a+=1)}c&&(t.slots[s].sessions[sessionindex].rowspan=a)}}})},checkColumns=function(t){for(var e=0;t.slots.length>e;e++)if(t.slots[e].issession&&t.slots[e].occupied!==0){var s=!1;for(j=e-1;j>0;j--)t.slots[j].issession&&getTotalMins(t.slots[j].sessions[0].end)>getTotalMins(t.slots[e].sessions[0].start)&&(s=!0);if(s===!1){var n=parseInt(getHrMin(t.slots[e].sessions[0].start)[0],10),o=parseInt(getHrMin(t.slots[e].sessions[0].start)[1],10)+5,i=getdateObject(n,o),r=toTimeString(i);t.slots[e].sessions[1]=t.slots[e].sessions[0],t.slots[e].sessions[0]={track:"empty",start:t.slots[e].sessions[1].start,end:r}}}},renderResponsiveTable=function(){$("td.tab-active").attr("colspan",3)},disableResponsiveTable=function(){$("td").not(".centered").attr("colspan","")},renderScheduleTable=function(t,e,s){t.forEach(function(t){var n=$("#scheduletemplate").html();e==="conference"?($(s).append(Mustache.render(n,t)),$(".schedule-table-container p.loadingtxt").hide()):($(s).append(Mustache.render(n,t)),$(".schedule-table-container p.loadingtxt").hide())}),768>$(window).width()&&renderResponsiveTable()},updateFontSize=function(t){var e=1,s=$(t).width(),n=parseInt($(t).css("max-height"),10),o=$(t).find("span");while(o.width()>s||o.height()>n)o.css("font-size",parseInt(o.css("font-size"),10)-e+"px")},getElemWidth=function(t){var e=$(t).css("width"),s=$(t).css("margin-left"),n=parseInt(e,10)+2.5*parseInt(s,10);return n},enableScroll=function(t){$(".mCustomScrollbar").css("width",t*getElemWidth(".proposal-card")+"px"),$(".mCustomScrollbar").mCustomScrollbar({axis:"x",theme:"dark-3",scrollInertia:10,alwaysShowScrollbar:0})};$(document).ready(function(){if($("#nav-home").length)var t=$("#nav-home").offset().top;$(window).scroll(function(){$("#nav-home").length&&($(this).scrollTop()>t?$("#nav-home").addClass("navbar-fixed-top"):$("#nav-home").removeClass("navbar-fixed-top"))}),$(".smooth-scroll").click(function(t){t.preventDefault();var e=$(this).attr("href"),s=$(""+e).offset().top-$("#site-nav").height();$("html,body").animate({scrollTop:s},"900")}),$(window).resize(function(){768>$(window).width()?renderResponsiveTable():disableResponsiveTable()}),$("#conferenceschedule, #workshopschedule").on("click","table td .js-expand",function(){$(this).hasClass("fa-caret-right")?($(this).removeClass("fa-caret-right").addClass("fa-caret-down"),$(this).parents("td").find(".description-text").slideDown()):($(this).removeClass("fa-caret-down").addClass("fa-caret-right"),$(this).parents("td").find(".description-text").slideUp())}),$("#conferenceschedule, #workshopschedule").on("click","table th.track0, table th.track1, table th.track2",function(){if(768>$(window).width()){var t=$(this).parents("table"),e=$(this).attr("data-td");t.find(".tab-active").removeClass("tab-active"),$(this).addClass("tab-active"),t.find("."+e).addClass("tab-active"),renderResponsiveTable()}}),$(".button").click(function(){var t=$(this).html(),e=$(this).attr("href");Rootconf.sendGA("click",t,e)}),$(".click").click(function(){var t=$(this).data("target"),e=$(this).data("label");Rootconf.sendGA("click",e,t)}),$("#tickets #boxoffice-selectItems").ready(function(){var t=Rootconf.getTicketId();t.length>0&&window.setTimeout(function(){var e,s=t[0];$("#"+s).offset()&&(e=$("#"+s).offset().top,$("#site-nav").length&&(e-=70),$("html,body").animate({scrollTop:e},"900"))},5e3)}),$("#boxoffice-widget").popover({selector:".t-shirt-image",placement:"right",trigger:"hover",html:!0})});